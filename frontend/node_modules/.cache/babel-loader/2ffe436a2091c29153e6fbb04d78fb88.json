{"ast":null,"code":"import { AstronomicalCalculator } from './AstronomicalCalculator';\nimport { MathUtils } from '../polyfills/Utils';\n/**\r\n * Implementation of sunrise and sunset methods to calculate astronomical times based on the <a\r\n * href=\"http://noaa.gov\">NOAA</a> algorithm. This calculator uses the Java algorithm based on the implementation by <a\r\n * href=\"http://noaa.gov\">NOAA - National Oceanic and Atmospheric Administration</a>'s <a href =\r\n * \"http://www.srrb.noaa.gov/highlights/sunrise/sunrise.html\">Surface Radiation Research Branch</a>. NOAA's <a\r\n * href=\"http://www.srrb.noaa.gov/highlights/sunrise/solareqns.PDF\">implementation</a> is based on equations from <a\r\n * href=\"http://www.willbell.com/math/mc1.htm\">Astronomical Algorithms</a> by <a\r\n * href=\"http://en.wikipedia.org/wiki/Jean_Meeus\">Jean Meeus</a>. Added to the algorithm is an adjustment of the zenith\r\n * to account for elevation. The algorithm can be found in the <a\r\n * href=\"http://en.wikipedia.org/wiki/Sunrise_equation\">Wikipedia Sunrise Equation</a> article.\r\n *\r\n * @author &copy; Eliyahu Hershfeld 2011 - 2019\r\n */\n\nexport class NOAACalculator extends AstronomicalCalculator {\n  /**\r\n   * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getCalculatorName()\r\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getCalculatorName() {\n    return 'US National Oceanic and Atmospheric Administration Algorithm';\n  }\n  /**\r\n   * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getUTCSunrise(Calendar, GeoLocation, double, boolean)\r\n   */\n\n\n  getUTCSunrise(date, geoLocation, zenith, adjustForElevation) {\n    const elevation = adjustForElevation ? geoLocation.getElevation() : 0;\n    const adjustedZenith = this.adjustZenith(zenith, elevation);\n    let sunrise = NOAACalculator.getSunriseUTC(NOAACalculator.getJulianDay(date), geoLocation.getLatitude(), -geoLocation.getLongitude(), adjustedZenith);\n    sunrise = sunrise / 60; // ensure that the time is >= 0 and < 24\n\n    while (sunrise < 0) {\n      sunrise += 24;\n    }\n\n    while (sunrise >= 24) {\n      sunrise -= 24;\n    }\n\n    return sunrise;\n  }\n  /**\r\n   * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getUTCSunset(Calendar, GeoLocation, double, boolean)\r\n   */\n\n\n  getUTCSunset(date, geoLocation, zenith, adjustForElevation) {\n    const elevation = adjustForElevation ? geoLocation.getElevation() : 0;\n    const adjustedZenith = this.adjustZenith(zenith, elevation);\n    let sunset = NOAACalculator.getSunsetUTC(NOAACalculator.getJulianDay(date), geoLocation.getLatitude(), -geoLocation.getLongitude(), adjustedZenith);\n    sunset = sunset / 60; // ensure that the time is >= 0 and < 24\n\n    while (sunset < 0) {\n      sunset += 24;\n    }\n\n    while (sunset >= 24) {\n      sunset -= 24;\n    }\n\n    return sunset;\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> from a Java Calendar\r\n   *\r\n   * @param calendar\r\n   *            The Java Calendar\r\n   * @return the Julian day corresponding to the date Note: Number is returned for start of day. Fractional days\r\n   *         should be added later.\r\n   */\n\n\n  static getJulianDay(date) {\n    let {\n      year,\n      month\n    } = date;\n    const {\n      day\n    } = date;\n\n    if (month <= 2) {\n      year -= 1;\n      month += 12;\n    }\n\n    const a = Math.trunc(year / 100);\n    const b = Math.trunc(2 - a + a / 4);\n    return Math.floor(365.25 * (year + 4716)) + Math.floor(30.6001 * (month + 1)) + day + b - 1524.5;\n  }\n  /**\r\n   * Convert <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> to centuries since J2000.0.\r\n   *\r\n   * @param julianDay\r\n   *            the Julian Day to convert\r\n   * @return the centuries since 2000 Julian corresponding to the Julian Day\r\n   */\n\n\n  static getJulianCenturiesFromJulianDay(julianDay) {\n    return (julianDay - NOAACalculator.JULIAN_DAY_JAN_1_2000) / NOAACalculator.JULIAN_DAYS_PER_CENTURY;\n  }\n  /**\r\n   * Convert centuries since J2000.0 to <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a>.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the Julian Day corresponding to the Julian centuries passed in\r\n   */\n\n\n  static getJulianDayFromJulianCenturies(julianCenturies) {\n    return julianCenturies * NOAACalculator.JULIAN_DAYS_PER_CENTURY + NOAACalculator.JULIAN_DAY_JAN_1_2000;\n  }\n  /**\r\n   * Returns the Geometric <a href=\"http://en.wikipedia.org/wiki/Mean_longitude\">Mean Longitude</a> of the Sun.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the Geometric Mean Longitude of the Sun in degrees\r\n   */\n\n\n  static getSunGeometricMeanLongitude(julianCenturies) {\n    let longitude = 280.46646 + julianCenturies * (36000.76983 + 0.0003032 * julianCenturies);\n\n    while (longitude > 360) {\n      longitude -= 360;\n    }\n\n    while (longitude < 0) {\n      longitude += 360;\n    }\n\n    return longitude; // in degrees\n  }\n  /**\r\n   * Returns the Geometric <a href=\"http://en.wikipedia.org/wiki/Mean_anomaly\">Mean Anomaly</a> of the Sun.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the Geometric Mean Anomaly of the Sun in degrees\r\n   */\n\n\n  static getSunGeometricMeanAnomaly(julianCenturies) {\n    return 357.52911 + julianCenturies * (35999.05029 - 0.0001537 * julianCenturies); // in degrees\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Eccentricity_%28orbit%29\">eccentricity of earth's orbit</a>.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the unitless eccentricity\r\n   */\n\n\n  static getEarthOrbitEccentricity(julianCenturies) {\n    return 0.016708634 - julianCenturies * (0.000042037 + 0.0000001267 * julianCenturies); // unitless\n  }\n  /**\r\n   * Returns the <a href=\"http://en.wikipedia.org/wiki/Equation_of_the_center\">equation of center</a> for the sun.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the equation of center for the sun in degrees\r\n   */\n\n\n  static getSunEquationOfCenter(julianCenturies) {\n    const m = NOAACalculator.getSunGeometricMeanAnomaly(julianCenturies);\n    const mrad = MathUtils.degreesToRadians(m);\n    const sinm = Math.sin(mrad);\n    const sin2m = Math.sin(mrad + mrad);\n    const sin3m = Math.sin(mrad + mrad + mrad);\n    return sinm * (1.914602 - julianCenturies * (0.004817 + 0.000014 * julianCenturies)) + sin2m * (0.019993 - 0.000101 * julianCenturies) + sin3m * 0.000289; // in degrees\n  }\n  /**\r\n   * Return the true longitude of the sun\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the sun's true longitude in degrees\r\n   */\n\n\n  static getSunTrueLongitude(julianCenturies) {\n    const sunLongitude = NOAACalculator.getSunGeometricMeanLongitude(julianCenturies);\n    const center = NOAACalculator.getSunEquationOfCenter(julianCenturies);\n    return sunLongitude + center; // in degrees\n  } // /**\n  // * Returns the <a href=\"http://en.wikipedia.org/wiki/True_anomaly\">true anamoly</a> of the sun.\n  // *\n  // * @param julianCenturies\n  // * the number of Julian centuries since J2000.0\n  // * @return the sun's true anamoly in degrees\n  // */\n  // private static double getSunTrueAnomaly(double julianCenturies) {\n  // double meanAnomaly = getSunGeometricMeanAnomaly(julianCenturies);\n  // double equationOfCenter = getSunEquationOfCenter(julianCenturies);\n  //\n  // return meanAnomaly + equationOfCenter; // in degrees\n  // }\n\n  /**\r\n   * Return the apparent longitude of the sun\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return sun's apparent longitude in degrees\r\n   */\n\n\n  static getSunApparentLongitude(julianCenturies) {\n    const sunTrueLongitude = NOAACalculator.getSunTrueLongitude(julianCenturies);\n    const omega = 125.04 - 1934.136 * julianCenturies;\n    const lambda = sunTrueLongitude - 0.00569 - 0.00478 * Math.sin(MathUtils.degreesToRadians(omega));\n    return lambda; // in degrees\n  }\n  /**\r\n   * Returns the mean <a href=\"http://en.wikipedia.org/wiki/Axial_tilt\">obliquity of the ecliptic</a> (Axial tilt).\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the mean obliquity in degrees\r\n   */\n\n\n  static getMeanObliquityOfEcliptic(julianCenturies) {\n    const seconds = 21.448 - julianCenturies * (46.8150 + julianCenturies * (0.00059 - julianCenturies * 0.001813));\n    return 23 + (26 + seconds / 60) / 60; // in degrees\n  }\n  /**\r\n   * Returns the corrected <a href=\"http://en.wikipedia.org/wiki/Axial_tilt\">obliquity of the ecliptic</a> (Axial\r\n   * tilt).\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return the corrected obliquity in degrees\r\n   */\n\n\n  static getObliquityCorrection(julianCenturies) {\n    const obliquityOfEcliptic = NOAACalculator.getMeanObliquityOfEcliptic(julianCenturies);\n    const omega = 125.04 - 1934.136 * julianCenturies;\n    return obliquityOfEcliptic + 0.00256 * Math.cos(MathUtils.degreesToRadians(omega)); // in degrees\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Declination\">declination</a> of the sun.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return\r\n   *            the sun's declination in degrees\r\n   */\n\n\n  static getSunDeclination(julianCenturies) {\n    const obliquityCorrection = NOAACalculator.getObliquityCorrection(julianCenturies);\n    const lambda = NOAACalculator.getSunApparentLongitude(julianCenturies);\n    const sint = Math.sin(MathUtils.degreesToRadians(obliquityCorrection)) * Math.sin(MathUtils.degreesToRadians(lambda));\n    const theta = MathUtils.radiansToDegrees(Math.asin(sint));\n    return theta; // in degrees\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Equation_of_time\">Equation of Time</a> - the difference between\r\n   * true solar time and mean solar time\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @return equation of time in minutes of time\r\n   */\n\n\n  static getEquationOfTime(julianCenturies) {\n    const epsilon = NOAACalculator.getObliquityCorrection(julianCenturies);\n    const geomMeanLongSun = NOAACalculator.getSunGeometricMeanLongitude(julianCenturies);\n    const eccentricityEarthOrbit = NOAACalculator.getEarthOrbitEccentricity(julianCenturies);\n    const geomMeanAnomalySun = NOAACalculator.getSunGeometricMeanAnomaly(julianCenturies);\n    let y = Math.tan(MathUtils.degreesToRadians(epsilon) / 2);\n    y *= y;\n    const sin2l0 = Math.sin(2 * MathUtils.degreesToRadians(geomMeanLongSun));\n    const sinm = Math.sin(MathUtils.degreesToRadians(geomMeanAnomalySun));\n    const cos2l0 = Math.cos(2 * MathUtils.degreesToRadians(geomMeanLongSun));\n    const sin4l0 = Math.sin(4 * MathUtils.degreesToRadians(geomMeanLongSun));\n    const sin2m = Math.sin(2 * MathUtils.degreesToRadians(geomMeanAnomalySun));\n    const equationOfTime = y * sin2l0 - 2 * eccentricityEarthOrbit * sinm + 4 * eccentricityEarthOrbit * y * sinm * cos2l0 - 0.5 * y * y * sin4l0 - 1.25 * eccentricityEarthOrbit * eccentricityEarthOrbit * sin2m;\n    return MathUtils.radiansToDegrees(equationOfTime) * 4; // in minutes of time\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Hour_angle\">hour angle</a> of the sun at sunrise for the\r\n   * latitude.\r\n   *\r\n   * @param lat\r\n   *            , the latitude of observer in degrees\r\n   * @param solarDec\r\n   *            the declination angle of sun in degrees\r\n   * @param zenith\r\n   *            the zenith\r\n   * @return hour angle of sunrise in radians\r\n   */\n\n\n  static getSunHourAngleAtSunrise(lat, solarDec, zenith) {\n    const latRad = MathUtils.degreesToRadians(lat);\n    const sdRad = MathUtils.degreesToRadians(solarDec);\n    return Math.acos(Math.cos(MathUtils.degreesToRadians(zenith)) / (Math.cos(latRad) * Math.cos(sdRad)) - Math.tan(latRad) * Math.tan(sdRad)); // in radians\n  }\n  /**\r\n   * Returns the <a href=\"http://en.wikipedia.org/wiki/Hour_angle\">hour angle</a> of the sun at sunset for the\r\n   * latitude. TODO: use - {@link #getSunHourAngleAtSunrise(double, double, double)} implementation to avoid\r\n   * duplication of code.\r\n   *\r\n   * @param lat\r\n   *            the latitude of observer in degrees\r\n   * @param solarDec\r\n   *            the declination angle of sun in degrees\r\n   * @param zenith\r\n   *            the zenith\r\n   * @return the hour angle of sunset in radians\r\n   */\n\n\n  static getSunHourAngleAtSunset(lat, solarDec, zenith) {\n    const latRad = MathUtils.degreesToRadians(lat);\n    const sdRad = MathUtils.degreesToRadians(solarDec);\n    const hourAngle = Math.acos(Math.cos(MathUtils.degreesToRadians(zenith)) / (Math.cos(latRad) * Math.cos(sdRad)) - Math.tan(latRad) * Math.tan(sdRad));\n    return -hourAngle; // in radians\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Celestial_coordinate_system\">Solar Elevation</a> for the\r\n   * horizontal coordinate system at the given location at the given time. Can be negative if the sun is below the\r\n   * horizon. Not corrected for altitude.\r\n   *\r\n   * @param cal\r\n   *            time of calculation\r\n   * @param lat\r\n   *            latitude of location for calculation\r\n   * @param lon\r\n   *            longitude of location for calculation\r\n   * @return solar elevation in degrees - horizon is 0 degrees, civil twilight is -6 degrees\r\n   */\n\n\n  static getSolarElevation(date, lat, lon) {\n    const julianDay = NOAACalculator.getJulianDay(date);\n    const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\n    const equationOfTime = NOAACalculator.getEquationOfTime(julianCenturies);\n    let longitude = date.hour + 12 + (date.minute + equationOfTime + date.second / 60) / 60;\n    longitude = -(longitude * 360 / 24) % 360;\n    const hourAngleRad = MathUtils.degreesToRadians(lon - longitude);\n    const declination = NOAACalculator.getSunDeclination(julianCenturies);\n    const decRad = MathUtils.degreesToRadians(declination);\n    const latRad = MathUtils.degreesToRadians(lat);\n    return MathUtils.radiansToDegrees(Math.asin(Math.sin(latRad) * Math.sin(decRad) + Math.cos(latRad) * Math.cos(decRad) * Math.cos(hourAngleRad)));\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Celestial_coordinate_system\">Solar Azimuth</a> for the\r\n   * horizontal coordinate system at the given location at the given time. Not corrected for altitude. True south is 0\r\n   * degrees.\r\n   *\r\n   * @param cal\r\n   *            time of calculation\r\n   * @param latitude\r\n   *            latitude of location for calculation\r\n   * @param lon\r\n   *            longitude of location for calculation\r\n   * @return FIXME\r\n   */\n\n\n  static getSolarAzimuth(date, latitude, lon) {\n    const julianDay = NOAACalculator.getJulianDay(date);\n    const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\n    const equationOfTime = NOAACalculator.getEquationOfTime(julianCenturies);\n    let longitude = date.hour + 12 + (date.minute + equationOfTime + date.second / 60) / 60;\n    longitude = -(longitude * 360 / 24) % 360;\n    const hourAngleRad = MathUtils.degreesToRadians(lon - longitude);\n    const declination = NOAACalculator.getSunDeclination(julianCenturies);\n    const decRad = MathUtils.degreesToRadians(declination);\n    const latRad = MathUtils.degreesToRadians(latitude);\n    return MathUtils.radiansToDegrees(Math.atan(Math.sin(hourAngleRad) / (Math.cos(hourAngleRad) * Math.sin(latRad) - Math.tan(decRad) * Math.cos(latRad)))) + 180;\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n   * of sunrise for the given day at the given location on earth\r\n   *\r\n   * @param julianDay\r\n   *            the Julian day\r\n   * @param latitude\r\n   *            the latitude of observer in degrees\r\n   * @param longitude\r\n   *            the longitude of observer in degrees\r\n   * @param zenith\r\n   *            the zenith\r\n   * @return the time in minutes from zero UTC\r\n   */\n\n\n  static getSunriseUTC(julianDay, latitude, longitude, zenith) {\n    const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay); // Find the time of solar noon at the location, and use that declination. This is better than start of the\n    // Julian day\n\n    const noonmin = NOAACalculator.getSolarNoonUTC(julianCenturies, longitude);\n    const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay + noonmin / 1440); // First pass to approximate sunrise (using solar noon)\n\n    let eqTime = NOAACalculator.getEquationOfTime(tnoon);\n    let solarDec = NOAACalculator.getSunDeclination(tnoon);\n    let hourAngle = NOAACalculator.getSunHourAngleAtSunrise(latitude, solarDec, zenith);\n    let delta = longitude - MathUtils.radiansToDegrees(hourAngle);\n    let timeDiff = 4 * delta; // in minutes of time\n\n    let timeUTC = 720 + timeDiff - eqTime; // in minutes\n    // Second pass includes fractional Julian Day in gamma calc\n\n    const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + timeUTC / 1440);\n    eqTime = NOAACalculator.getEquationOfTime(newt);\n    solarDec = NOAACalculator.getSunDeclination(newt);\n    hourAngle = NOAACalculator.getSunHourAngleAtSunrise(latitude, solarDec, zenith);\n    delta = longitude - MathUtils.radiansToDegrees(hourAngle);\n    timeDiff = 4 * delta;\n    timeUTC = 720 + timeDiff - eqTime; // in minutes\n\n    return timeUTC;\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n   * of <a href=\"http://en.wikipedia.org/wiki/Noon#Solar_noon\">solar noon</a> for the given day at the given location\r\n   * on earth.\r\n   *\r\n   * @param julianCenturies\r\n   *            the number of Julian centuries since J2000.0\r\n   * @param longitude\r\n   *            the longitude of observer in degrees\r\n   * @return the time in minutes from zero UTC\r\n   */\n\n\n  static getSolarNoonUTC(julianCenturies, longitude) {\n    // First pass uses approximate solar noon to calculate eqtime\n    const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + longitude / 360);\n    let eqTime = NOAACalculator.getEquationOfTime(tnoon);\n    const solNoonUTC = 720 + longitude * 4 - eqTime; // min\n\n    const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) - 0.5 + solNoonUTC / 1440);\n    eqTime = NOAACalculator.getEquationOfTime(newt);\n    return 720 + longitude * 4 - eqTime; // min\n  }\n  /**\r\n   * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n   * of sunset for the given day at the given location on earth\r\n   *\r\n   * @param julianDay\r\n   *            the Julian day\r\n   * @param latitude\r\n   *            the latitude of observer in degrees\r\n   * @param longitude\r\n   *            : longitude of observer in degrees\r\n   * @param zenith\r\n   *            the zenith\r\n   * @return the time in minutes from zero Universal Coordinated Time (UTC)\r\n   */\n\n\n  static getSunsetUTC(julianDay, latitude, longitude, zenith) {\n    const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay); // Find the time of solar noon at the location, and use that declination. This is better than start of the\n    // Julian day\n\n    const noonmin = NOAACalculator.getSolarNoonUTC(julianCenturies, longitude);\n    const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay + noonmin / 1440); // First calculates sunrise and approx length of day\n\n    let eqTime = NOAACalculator.getEquationOfTime(tnoon);\n    let solarDec = NOAACalculator.getSunDeclination(tnoon);\n    let hourAngle = NOAACalculator.getSunHourAngleAtSunset(latitude, solarDec, zenith);\n    let delta = longitude - MathUtils.radiansToDegrees(hourAngle);\n    let timeDiff = 4 * delta;\n    let timeUTC = 720 + timeDiff - eqTime; // Second pass includes fractional Julian Day in gamma calc\n\n    const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + timeUTC / 1440);\n    eqTime = NOAACalculator.getEquationOfTime(newt);\n    solarDec = NOAACalculator.getSunDeclination(newt);\n    hourAngle = NOAACalculator.getSunHourAngleAtSunset(latitude, solarDec, zenith);\n    delta = longitude - MathUtils.radiansToDegrees(hourAngle);\n    timeDiff = 4 * delta;\n    timeUTC = 720 + timeDiff - eqTime; // in minutes\n\n    return timeUTC;\n  }\n\n}\n/**\r\n * The <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> of January 1, 2000\r\n */\n\nNOAACalculator.JULIAN_DAY_JAN_1_2000 = 2451545;\n/**\r\n * Julian days per century\r\n */\n\nNOAACalculator.JULIAN_DAYS_PER_CENTURY = 36525;","map":{"version":3,"sources":["../../../src/util/NOAACalculator.ts"],"names":[],"mappings":"AAGA,SAAS,sBAAT,QAAuC,0BAAvC;AACA,SAAS,SAAT,QAA0B,oBAA1B;AAEA;;;;;;;;;;;;AAYG;;AACH,OAAM,MAAO,cAAP,SAA8B,sBAA9B,CAAoD;AAWxD;;AAEG;AACH;AACO,EAAA,iBAAiB,GAAA;AACtB,WAAO,8DAAP;AACD;AAED;;AAEG;;;AACI,EAAA,aAAa,CAAC,IAAD,EAAiB,WAAjB,EAA2C,MAA3C,EAA2D,kBAA3D,EAAsF;AACxG,UAAM,SAAS,GAAW,kBAAkB,GAAG,WAAW,CAAC,YAAZ,EAAH,GAAgC,CAA5E;AACA,UAAM,cAAc,GAAW,KAAK,YAAL,CAAkB,MAAlB,EAA0B,SAA1B,CAA/B;AAEA,QAAI,OAAO,GAAW,cAAc,CAAC,aAAf,CAA6B,cAAc,CAAC,YAAf,CAA4B,IAA5B,CAA7B,EAAgE,WAAW,CAAC,WAAZ,EAAhE,EAA2F,CAAC,WAAW,CAAC,YAAZ,EAA5F,EACpB,cADoB,CAAtB;AAEA,IAAA,OAAO,GAAG,OAAO,GAAG,EAApB,CANwG,CAQxG;;AACA,WAAO,OAAO,GAAG,CAAjB,EAAoB;AAClB,MAAA,OAAO,IAAI,EAAX;AACD;;AACD,WAAO,OAAO,IAAI,EAAlB,EAAsB;AACpB,MAAA,OAAO,IAAI,EAAX;AACD;;AACD,WAAO,OAAP;AACD;AAED;;AAEG;;;AACI,EAAA,YAAY,CAAC,IAAD,EAAiB,WAAjB,EAA2C,MAA3C,EAA2D,kBAA3D,EAAsF;AACvG,UAAM,SAAS,GAAW,kBAAkB,GAAG,WAAW,CAAC,YAAZ,EAAH,GAAgC,CAA5E;AACA,UAAM,cAAc,GAAW,KAAK,YAAL,CAAkB,MAAlB,EAA0B,SAA1B,CAA/B;AAEA,QAAI,MAAM,GAAW,cAAc,CAAC,YAAf,CAA4B,cAAc,CAAC,YAAf,CAA4B,IAA5B,CAA5B,EAA+D,WAAW,CAAC,WAAZ,EAA/D,EAA0F,CAAC,WAAW,CAAC,YAAZ,EAA3F,EACnB,cADmB,CAArB;AAEA,IAAA,MAAM,GAAG,MAAM,GAAG,EAAlB,CANuG,CAQvG;;AACA,WAAO,MAAM,GAAG,CAAhB,EAAmB;AACjB,MAAA,MAAM,IAAI,EAAV;AACD;;AACD,WAAO,MAAM,IAAI,EAAjB,EAAqB;AACnB,MAAA,MAAM,IAAI,EAAV;AACD;;AACD,WAAO,MAAP;AACD;AAED;;;;;;;AAOG;;;AACK,SAAO,YAAP,CAAoB,IAApB,EAAkC;AACxC,QAAI;AAAE,MAAA,IAAF;AAAQ,MAAA;AAAR,QAAkB,IAAtB;AACA,UAAM;AAAE,MAAA;AAAF,QAAU,IAAhB;;AACA,QAAI,KAAK,IAAI,CAAb,EAAgB;AACd,MAAA,IAAI,IAAI,CAAR;AACA,MAAA,KAAK,IAAI,EAAT;AACD;;AACD,UAAM,CAAC,GAAW,IAAI,CAAC,KAAL,CAAW,IAAI,GAAG,GAAlB,CAAlB;AACA,UAAM,CAAC,GAAW,IAAI,CAAC,KAAL,CAAW,IAAI,CAAJ,GAAQ,CAAC,GAAG,CAAvB,CAAlB;AAEA,WAAO,IAAI,CAAC,KAAL,CAAW,UAAU,IAAI,GAAG,IAAjB,CAAX,IAAqC,IAAI,CAAC,KAAL,CAAW,WAAW,KAAK,GAAG,CAAnB,CAAX,CAArC,GAAyE,GAAzE,GAA+E,CAA/E,GAAmF,MAA1F;AACD;AAED;;;;;;AAMG;;;AACK,SAAO,+BAAP,CAAuC,SAAvC,EAAwD;AAC9D,WAAO,CAAC,SAAS,GAAG,cAAc,CAAC,qBAA5B,IAAqD,cAAc,CAAC,uBAA3E;AACD;AAED;;;;;;AAMG;;;AACK,SAAO,+BAAP,CAAuC,eAAvC,EAA8D;AACpE,WAAO,eAAe,GAAG,cAAc,CAAC,uBAAjC,GAA2D,cAAc,CAAC,qBAAjF;AACD;AAED;;;;;;AAMG;;;AACK,SAAO,4BAAP,CAAoC,eAApC,EAA2D;AACjE,QAAI,SAAS,GAAW,YAAY,eAAe,IAAI,cAAc,YAAY,eAA9B,CAAnD;;AACA,WAAO,SAAS,GAAG,GAAnB,EAAwB;AACtB,MAAA,SAAS,IAAI,GAAb;AACD;;AACD,WAAO,SAAS,GAAG,CAAnB,EAAsB;AACpB,MAAA,SAAS,IAAI,GAAb;AACD;;AAED,WAAO,SAAP,CATiE,CAS/C;AACnB;AAED;;;;;;AAMG;;;AACK,SAAO,0BAAP,CAAkC,eAAlC,EAAyD;AAC/D,WAAO,YAAY,eAAe,IAAI,cAAc,YAAY,eAA9B,CAAlC,CAD+D,CACmB;AACnF;AAED;;;;;;AAMG;;;AACK,SAAO,yBAAP,CAAiC,eAAjC,EAAwD;AAC9D,WAAO,cAAc,eAAe,IAAI,cAAc,eAAe,eAAjC,CAApC,CAD8D,CACyB;AACxF;AAED;;;;;;AAMG;;;AACK,SAAO,sBAAP,CAA8B,eAA9B,EAAqD;AAC3D,UAAM,CAAC,GAAW,cAAc,CAAC,0BAAf,CAA0C,eAA1C,CAAlB;AAEA,UAAM,IAAI,GAAW,SAAS,CAAC,gBAAV,CAA2B,CAA3B,CAArB;AACA,UAAM,IAAI,GAAW,IAAI,CAAC,GAAL,CAAS,IAAT,CAArB;AACA,UAAM,KAAK,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,GAAG,IAAhB,CAAtB;AACA,UAAM,KAAK,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,GAAG,IAAP,GAAc,IAAvB,CAAtB;AAEA,WAAO,IAAI,IAAI,WAAW,eAAe,IAAI,WAAW,WAAW,eAA1B,CAA9B,CAAJ,GAAgF,KAAK,IACvF,WAAW,WAAW,eADiE,CAArF,GACuC,KAAK,GAAG,QADtD,CAR2D,CASK;AACjE;AAED;;;;;;AAMG;;;AACK,SAAO,mBAAP,CAA2B,eAA3B,EAAkD;AACxD,UAAM,YAAY,GAAW,cAAc,CAAC,4BAAf,CAA4C,eAA5C,CAA7B;AACA,UAAM,MAAM,GAAW,cAAc,CAAC,sBAAf,CAAsC,eAAtC,CAAvB;AAEA,WAAO,YAAY,GAAG,MAAtB,CAJwD,CAI1B;AAC/B,GAhLuD,CAkLxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;AAMG;;;AACK,SAAO,uBAAP,CAA+B,eAA/B,EAAsD;AAC5D,UAAM,gBAAgB,GAAW,cAAc,CAAC,mBAAf,CAAmC,eAAnC,CAAjC;AAEA,UAAM,KAAK,GAAW,SAAS,WAAW,eAA1C;AACA,UAAM,MAAM,GAAW,gBAAgB,GAAG,OAAnB,GAA6B,UAAU,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,KAA3B,CAAT,CAA9D;AACA,WAAO,MAAP,CAL4D,CAK7C;AAChB;AAED;;;;;;AAMG;;;AACK,SAAO,0BAAP,CAAkC,eAAlC,EAAyD;AAC/D,UAAM,OAAO,GAAW,SAAS,eAAe,IAC3C,UAAU,eAAe,IAAI,UAAU,eAAe,GAAI,QAAjC,CADkB,CAAhD;AAEA,WAAO,KAAK,CAAC,KAAM,OAAO,GAAG,EAAjB,IAAwB,EAApC,CAH+D,CAGvB;AACzC;AAED;;;;;;;AAOG;;;AACK,SAAO,sBAAP,CAA8B,eAA9B,EAAqD;AAC3D,UAAM,mBAAmB,GAAW,cAAc,CAAC,0BAAf,CAA0C,eAA1C,CAApC;AAEA,UAAM,KAAK,GAAW,SAAS,WAAW,eAA1C;AACA,WAAO,mBAAmB,GAAG,UAAU,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,KAA3B,CAAT,CAAvC,CAJ2D,CAIyB;AACrF;AAED;;;;;;;AAOG;;;AACK,SAAO,iBAAP,CAAyB,eAAzB,EAAgD;AACtD,UAAM,mBAAmB,GAAW,cAAc,CAAC,sBAAf,CAAsC,eAAtC,CAApC;AACA,UAAM,MAAM,GAAW,cAAc,CAAC,uBAAf,CAAuC,eAAvC,CAAvB;AAEA,UAAM,IAAI,GAAW,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,mBAA3B,CAAT,IAA4D,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,MAA3B,CAAT,CAAjF;AACA,UAAM,KAAK,GAAW,SAAS,CAAC,gBAAV,CAA2B,IAAI,CAAC,IAAL,CAAU,IAAV,CAA3B,CAAtB;AACA,WAAO,KAAP,CANsD,CAMxC;AACf;AAED;;;;;;;AAOG;;;AACK,SAAO,iBAAP,CAAyB,eAAzB,EAAgD;AACtD,UAAM,OAAO,GAAW,cAAc,CAAC,sBAAf,CAAsC,eAAtC,CAAxB;AACA,UAAM,eAAe,GAAW,cAAc,CAAC,4BAAf,CAA4C,eAA5C,CAAhC;AACA,UAAM,sBAAsB,GAAW,cAAc,CAAC,yBAAf,CAAyC,eAAzC,CAAvC;AACA,UAAM,kBAAkB,GAAW,cAAc,CAAC,0BAAf,CAA0C,eAA1C,CAAnC;AAEA,QAAI,CAAC,GAAW,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,OAA3B,IAAsC,CAA/C,CAAhB;AACA,IAAA,CAAC,IAAI,CAAL;AAEA,UAAM,MAAM,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,SAAS,CAAC,gBAAV,CAA2B,eAA3B,CAAb,CAAvB;AACA,UAAM,IAAI,GAAW,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,kBAA3B,CAAT,CAArB;AACA,UAAM,MAAM,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,SAAS,CAAC,gBAAV,CAA2B,eAA3B,CAAb,CAAvB;AACA,UAAM,MAAM,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,SAAS,CAAC,gBAAV,CAA2B,eAA3B,CAAb,CAAvB;AACA,UAAM,KAAK,GAAW,IAAI,CAAC,GAAL,CAAS,IAAI,SAAS,CAAC,gBAAV,CAA2B,kBAA3B,CAAb,CAAtB;AAEA,UAAM,cAAc,GAAW,CAAC,GAAG,MAAJ,GAAa,IAAI,sBAAJ,GAA6B,IAA1C,GAAiD,IAAI,sBAAJ,GAA6B,CAA7B,GAC5E,IAD4E,GACrE,MADoB,GACX,MAAM,CAAN,GAAU,CAAV,GAAc,MADH,GACY,OAAO,sBAAP,GAAgC,sBAAhC,GAAyD,KADpG;AAEA,WAAO,SAAS,CAAC,gBAAV,CAA2B,cAA3B,IAA6C,CAApD,CAjBsD,CAiBC;AACxD;AAED;;;;;;;;;;;AAWG;;;AACK,SAAO,wBAAP,CAAgC,GAAhC,EAA6C,QAA7C,EAA+D,MAA/D,EAA6E;AACnF,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,GAA3B,CAAvB;AACA,UAAM,KAAK,GAAW,SAAS,CAAC,gBAAV,CAA2B,QAA3B,CAAtB;AAEA,WAAQ,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,MAA3B,CAAT,KAAgD,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,KAAT,CAAnE,IACd,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,KAAT,CADf,CAAR,CAJmF,CAKzC;AAC3C;AAED;;;;;;;;;;;;AAYG;;;AACK,SAAO,uBAAP,CAA+B,GAA/B,EAA4C,QAA5C,EAA8D,MAA9D,EAA4E;AAClF,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,GAA3B,CAAvB;AACA,UAAM,KAAK,GAAW,SAAS,CAAC,gBAAV,CAA2B,QAA3B,CAAtB;AAEA,UAAM,SAAS,GAAY,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,GAAL,CAAS,SAAS,CAAC,gBAAV,CAA2B,MAA3B,CAAT,KAAgD,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,KAAT,CAAnE,IACjC,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,KAAT,CADI,CAA3B;AAEA,WAAO,CAAC,SAAR,CANkF,CAM/D;AACpB;AAED;;;;;;;;;;;;AAYG;;;AAEI,SAAO,iBAAP,CAAyB,IAAzB,EAAyC,GAAzC,EAAsD,GAAtD,EAAiE;AACtE,UAAM,SAAS,GAAW,cAAc,CAAC,YAAf,CAA4B,IAA5B,CAA1B;AACA,UAAM,eAAe,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAA/C,CAAhC;AAEA,UAAM,cAAc,GAAW,cAAc,CAAC,iBAAf,CAAiC,eAAjC,CAA/B;AAEA,QAAI,SAAS,GAAY,IAAI,CAAC,IAAL,GAAY,EAAb,GAAmB,CAAC,IAAI,CAAC,MAAL,GAAc,cAAd,GAA+B,IAAI,CAAC,MAAL,GAAc,EAA9C,IAAoD,EAA/F;AAEA,IAAA,SAAS,GAAG,EAAE,SAAS,GAAG,GAAZ,GAAkB,EAApB,IAA0B,GAAtC;AACA,UAAM,YAAY,GAAW,SAAS,CAAC,gBAAV,CAA2B,GAAG,GAAG,SAAjC,CAA7B;AACA,UAAM,WAAW,GAAW,cAAc,CAAC,iBAAf,CAAiC,eAAjC,CAA5B;AACA,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,WAA3B,CAAvB;AACA,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,GAA3B,CAAvB;AACA,WAAO,SAAS,CAAC,gBAAV,CAA2B,IAAI,CAAC,IAAL,CAAW,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,MAAT,CAApB,GACvC,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,MAAT,CAAnB,GAAsC,IAAI,CAAC,GAAL,CAAS,YAAT,CADT,CAA3B,CAAP;AAED;AAED;;;;;;;;;;;;AAYG;;;AAEI,SAAO,eAAP,CAAuB,IAAvB,EAAuC,QAAvC,EAAyD,GAAzD,EAAoE;AACzE,UAAM,SAAS,GAAW,cAAc,CAAC,YAAf,CAA4B,IAA5B,CAA1B;AACA,UAAM,eAAe,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAA/C,CAAhC;AAEA,UAAM,cAAc,GAAW,cAAc,CAAC,iBAAf,CAAiC,eAAjC,CAA/B;AAEA,QAAI,SAAS,GAAY,IAAI,CAAC,IAAL,GAAY,EAAb,GAAmB,CAAC,IAAI,CAAC,MAAL,GAAc,cAAd,GAA+B,IAAI,CAAC,MAAL,GAAc,EAA9C,IAAoD,EAA/F;AAEA,IAAA,SAAS,GAAG,EAAE,SAAS,GAAG,GAAZ,GAAkB,EAApB,IAA0B,GAAtC;AACA,UAAM,YAAY,GAAW,SAAS,CAAC,gBAAV,CAA2B,GAAG,GAAG,SAAjC,CAA7B;AACA,UAAM,WAAW,GAAW,cAAc,CAAC,iBAAf,CAAiC,eAAjC,CAA5B;AACA,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,WAA3B,CAAvB;AACA,UAAM,MAAM,GAAW,SAAS,CAAC,gBAAV,CAA2B,QAA3B,CAAvB;AAEA,WAAO,SAAS,CAAC,gBAAV,CAA2B,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,GAAL,CAAS,YAAT,KACtC,IAAI,CAAC,GAAL,CAAS,YAAT,IAAyB,IAAI,CAAC,GAAL,CAAS,MAAT,CAA1B,GAA+C,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,MAAT,CAD3B,CAAV,CAA3B,IACuF,GAD9F;AAED;AAED;;;;;;;;;;;;;AAaG;;;AACK,SAAO,aAAP,CAAqB,SAArB,EAAwC,QAAxC,EAA0D,SAA1D,EAA6E,MAA7E,EAA2F;AACjG,UAAM,eAAe,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAA/C,CAAhC,CADiG,CAGjG;AACA;;AAEA,UAAM,OAAO,GAAW,cAAc,CAAC,eAAf,CAA+B,eAA/B,EAAgD,SAAhD,CAAxB;AACA,UAAM,KAAK,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAAS,GAAG,OAAO,GAAG,IAArE,CAAtB,CAPiG,CASjG;;AAEA,QAAI,MAAM,GAAW,cAAc,CAAC,iBAAf,CAAiC,KAAjC,CAArB;AACA,QAAI,QAAQ,GAAW,cAAc,CAAC,iBAAf,CAAiC,KAAjC,CAAvB;AACA,QAAI,SAAS,GAAW,cAAc,CAAC,wBAAf,CAAwC,QAAxC,EAAkD,QAAlD,EAA4D,MAA5D,CAAxB;AAEA,QAAI,KAAK,GAAW,SAAS,GAAG,SAAS,CAAC,gBAAV,CAA2B,SAA3B,CAAhC;AACA,QAAI,QAAQ,GAAW,IAAI,KAA3B,CAhBiG,CAgB/D;;AAClC,QAAI,OAAO,GAAW,MAAM,QAAN,GAAiB,MAAvC,CAjBiG,CAiBlD;AAE/C;;AAEA,UAAM,IAAI,GAAW,cAAc,CAAC,+BAAf,CACnB,cAAc,CAAC,+BAAf,CAA+C,eAA/C,IAAkE,OAAO,GAAG,IADzD,CAArB;AAEA,IAAA,MAAM,GAAG,cAAc,CAAC,iBAAf,CAAiC,IAAjC,CAAT;AACA,IAAA,QAAQ,GAAG,cAAc,CAAC,iBAAf,CAAiC,IAAjC,CAAX;AACA,IAAA,SAAS,GAAG,cAAc,CAAC,wBAAf,CAAwC,QAAxC,EAAkD,QAAlD,EAA4D,MAA5D,CAAZ;AACA,IAAA,KAAK,GAAG,SAAS,GAAG,SAAS,CAAC,gBAAV,CAA2B,SAA3B,CAApB;AACA,IAAA,QAAQ,GAAG,IAAI,KAAf;AACA,IAAA,OAAO,GAAG,MAAM,QAAN,GAAiB,MAA3B,CA5BiG,CA4B9D;;AACnC,WAAO,OAAP;AACD;AAED;;;;;;;;;;AAUG;;;AACK,SAAO,eAAP,CAAuB,eAAvB,EAAgD,SAAhD,EAAiE;AACvE;AACA,UAAM,KAAK,GAAW,cAAc,CAAC,+BAAf,CACpB,cAAc,CAAC,+BAAf,CAA+C,eAA/C,IAAkE,SAAS,GAAG,GAD1D,CAAtB;AAEA,QAAI,MAAM,GAAW,cAAc,CAAC,iBAAf,CAAiC,KAAjC,CAArB;AACA,UAAM,UAAU,GAAW,MAAO,SAAS,GAAG,CAAnB,GAAwB,MAAnD,CALuE,CAKZ;;AAE3D,UAAM,IAAI,GAAW,cAAc,CAAC,+BAAf,CACnB,cAAc,CAAC,+BAAf,CAA+C,eAA/C,IAAkE,GAAlE,GAAwE,UAAU,GAAG,IADlE,CAArB;AAGA,IAAA,MAAM,GAAG,cAAc,CAAC,iBAAf,CAAiC,IAAjC,CAAT;AACA,WAAO,MAAO,SAAS,GAAG,CAAnB,GAAwB,MAA/B,CAXuE,CAWhC;AACxC;AAED;;;;;;;;;;;;;AAaG;;;AACK,SAAO,YAAP,CAAoB,SAApB,EAAuC,QAAvC,EAAyD,SAAzD,EAA4E,MAA5E,EAA0F;AAChG,UAAM,eAAe,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAA/C,CAAhC,CADgG,CAGhG;AACA;;AAEA,UAAM,OAAO,GAAW,cAAc,CAAC,eAAf,CAA+B,eAA/B,EAAgD,SAAhD,CAAxB;AACA,UAAM,KAAK,GAAW,cAAc,CAAC,+BAAf,CAA+C,SAAS,GAAG,OAAO,GAAG,IAArE,CAAtB,CAPgG,CAShG;;AAEA,QAAI,MAAM,GAAW,cAAc,CAAC,iBAAf,CAAiC,KAAjC,CAArB;AACA,QAAI,QAAQ,GAAW,cAAc,CAAC,iBAAf,CAAiC,KAAjC,CAAvB;AACA,QAAI,SAAS,GAAW,cAAc,CAAC,uBAAf,CAAuC,QAAvC,EAAiD,QAAjD,EAA2D,MAA3D,CAAxB;AAEA,QAAI,KAAK,GAAW,SAAS,GAAG,SAAS,CAAC,gBAAV,CAA2B,SAA3B,CAAhC;AACA,QAAI,QAAQ,GAAW,IAAI,KAA3B;AACA,QAAI,OAAO,GAAW,MAAM,QAAN,GAAiB,MAAvC,CAjBgG,CAmBhG;;AAEA,UAAM,IAAI,GAAW,cAAc,CAAC,+BAAf,CACnB,cAAc,CAAC,+BAAf,CAA+C,eAA/C,IAAkE,OAAO,GAAG,IADzD,CAArB;AAEA,IAAA,MAAM,GAAG,cAAc,CAAC,iBAAf,CAAiC,IAAjC,CAAT;AACA,IAAA,QAAQ,GAAG,cAAc,CAAC,iBAAf,CAAiC,IAAjC,CAAX;AACA,IAAA,SAAS,GAAG,cAAc,CAAC,uBAAf,CAAuC,QAAvC,EAAiD,QAAjD,EAA2D,MAA3D,CAAZ;AAEA,IAAA,KAAK,GAAG,SAAS,GAAG,SAAS,CAAC,gBAAV,CAA2B,SAA3B,CAApB;AACA,IAAA,QAAQ,GAAG,IAAI,KAAf;AACA,IAAA,OAAO,GAAG,MAAM,QAAN,GAAiB,MAA3B,CA7BgG,CA6B7D;;AACnC,WAAO,OAAP;AACD;;AArfuD;AACxD;;AAEG;;AACqB,cAAA,CAAA,qBAAA,GAAgC,OAAhC;AAExB;;AAEG;;AACqB,cAAA,CAAA,uBAAA,GAAkC,KAAlC","sourceRoot":"","sourcesContent":["import { AstronomicalCalculator } from './AstronomicalCalculator';\r\nimport { MathUtils } from '../polyfills/Utils';\r\n/**\r\n * Implementation of sunrise and sunset methods to calculate astronomical times based on the <a\r\n * href=\"http://noaa.gov\">NOAA</a> algorithm. This calculator uses the Java algorithm based on the implementation by <a\r\n * href=\"http://noaa.gov\">NOAA - National Oceanic and Atmospheric Administration</a>'s <a href =\r\n * \"http://www.srrb.noaa.gov/highlights/sunrise/sunrise.html\">Surface Radiation Research Branch</a>. NOAA's <a\r\n * href=\"http://www.srrb.noaa.gov/highlights/sunrise/solareqns.PDF\">implementation</a> is based on equations from <a\r\n * href=\"http://www.willbell.com/math/mc1.htm\">Astronomical Algorithms</a> by <a\r\n * href=\"http://en.wikipedia.org/wiki/Jean_Meeus\">Jean Meeus</a>. Added to the algorithm is an adjustment of the zenith\r\n * to account for elevation. The algorithm can be found in the <a\r\n * href=\"http://en.wikipedia.org/wiki/Sunrise_equation\">Wikipedia Sunrise Equation</a> article.\r\n *\r\n * @author &copy; Eliyahu Hershfeld 2011 - 2019\r\n */\r\nexport class NOAACalculator extends AstronomicalCalculator {\r\n    /**\r\n     * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getCalculatorName()\r\n     */\r\n    // eslint-disable-next-line class-methods-use-this\r\n    getCalculatorName() {\r\n        return 'US National Oceanic and Atmospheric Administration Algorithm';\r\n    }\r\n    /**\r\n     * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getUTCSunrise(Calendar, GeoLocation, double, boolean)\r\n     */\r\n    getUTCSunrise(date, geoLocation, zenith, adjustForElevation) {\r\n        const elevation = adjustForElevation ? geoLocation.getElevation() : 0;\r\n        const adjustedZenith = this.adjustZenith(zenith, elevation);\r\n        let sunrise = NOAACalculator.getSunriseUTC(NOAACalculator.getJulianDay(date), geoLocation.getLatitude(), -geoLocation.getLongitude(), adjustedZenith);\r\n        sunrise = sunrise / 60;\r\n        // ensure that the time is >= 0 and < 24\r\n        while (sunrise < 0) {\r\n            sunrise += 24;\r\n        }\r\n        while (sunrise >= 24) {\r\n            sunrise -= 24;\r\n        }\r\n        return sunrise;\r\n    }\r\n    /**\r\n     * @see net.sourceforge.zmanim.util.AstronomicalCalculator#getUTCSunset(Calendar, GeoLocation, double, boolean)\r\n     */\r\n    getUTCSunset(date, geoLocation, zenith, adjustForElevation) {\r\n        const elevation = adjustForElevation ? geoLocation.getElevation() : 0;\r\n        const adjustedZenith = this.adjustZenith(zenith, elevation);\r\n        let sunset = NOAACalculator.getSunsetUTC(NOAACalculator.getJulianDay(date), geoLocation.getLatitude(), -geoLocation.getLongitude(), adjustedZenith);\r\n        sunset = sunset / 60;\r\n        // ensure that the time is >= 0 and < 24\r\n        while (sunset < 0) {\r\n            sunset += 24;\r\n        }\r\n        while (sunset >= 24) {\r\n            sunset -= 24;\r\n        }\r\n        return sunset;\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> from a Java Calendar\r\n     *\r\n     * @param calendar\r\n     *            The Java Calendar\r\n     * @return the Julian day corresponding to the date Note: Number is returned for start of day. Fractional days\r\n     *         should be added later.\r\n     */\r\n    static getJulianDay(date) {\r\n        let { year, month } = date;\r\n        const { day } = date;\r\n        if (month <= 2) {\r\n            year -= 1;\r\n            month += 12;\r\n        }\r\n        const a = Math.trunc(year / 100);\r\n        const b = Math.trunc(2 - a + a / 4);\r\n        return Math.floor(365.25 * (year + 4716)) + Math.floor(30.6001 * (month + 1)) + day + b - 1524.5;\r\n    }\r\n    /**\r\n     * Convert <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> to centuries since J2000.0.\r\n     *\r\n     * @param julianDay\r\n     *            the Julian Day to convert\r\n     * @return the centuries since 2000 Julian corresponding to the Julian Day\r\n     */\r\n    static getJulianCenturiesFromJulianDay(julianDay) {\r\n        return (julianDay - NOAACalculator.JULIAN_DAY_JAN_1_2000) / NOAACalculator.JULIAN_DAYS_PER_CENTURY;\r\n    }\r\n    /**\r\n     * Convert centuries since J2000.0 to <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a>.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the Julian Day corresponding to the Julian centuries passed in\r\n     */\r\n    static getJulianDayFromJulianCenturies(julianCenturies) {\r\n        return julianCenturies * NOAACalculator.JULIAN_DAYS_PER_CENTURY + NOAACalculator.JULIAN_DAY_JAN_1_2000;\r\n    }\r\n    /**\r\n     * Returns the Geometric <a href=\"http://en.wikipedia.org/wiki/Mean_longitude\">Mean Longitude</a> of the Sun.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the Geometric Mean Longitude of the Sun in degrees\r\n     */\r\n    static getSunGeometricMeanLongitude(julianCenturies) {\r\n        let longitude = 280.46646 + julianCenturies * (36000.76983 + 0.0003032 * julianCenturies);\r\n        while (longitude > 360) {\r\n            longitude -= 360;\r\n        }\r\n        while (longitude < 0) {\r\n            longitude += 360;\r\n        }\r\n        return longitude; // in degrees\r\n    }\r\n    /**\r\n     * Returns the Geometric <a href=\"http://en.wikipedia.org/wiki/Mean_anomaly\">Mean Anomaly</a> of the Sun.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the Geometric Mean Anomaly of the Sun in degrees\r\n     */\r\n    static getSunGeometricMeanAnomaly(julianCenturies) {\r\n        return 357.52911 + julianCenturies * (35999.05029 - 0.0001537 * julianCenturies); // in degrees\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Eccentricity_%28orbit%29\">eccentricity of earth's orbit</a>.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the unitless eccentricity\r\n     */\r\n    static getEarthOrbitEccentricity(julianCenturies) {\r\n        return 0.016708634 - julianCenturies * (0.000042037 + 0.0000001267 * julianCenturies); // unitless\r\n    }\r\n    /**\r\n     * Returns the <a href=\"http://en.wikipedia.org/wiki/Equation_of_the_center\">equation of center</a> for the sun.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the equation of center for the sun in degrees\r\n     */\r\n    static getSunEquationOfCenter(julianCenturies) {\r\n        const m = NOAACalculator.getSunGeometricMeanAnomaly(julianCenturies);\r\n        const mrad = MathUtils.degreesToRadians(m);\r\n        const sinm = Math.sin(mrad);\r\n        const sin2m = Math.sin(mrad + mrad);\r\n        const sin3m = Math.sin(mrad + mrad + mrad);\r\n        return sinm * (1.914602 - julianCenturies * (0.004817 + 0.000014 * julianCenturies)) + sin2m\r\n            * (0.019993 - 0.000101 * julianCenturies) + sin3m * 0.000289; // in degrees\r\n    }\r\n    /**\r\n     * Return the true longitude of the sun\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the sun's true longitude in degrees\r\n     */\r\n    static getSunTrueLongitude(julianCenturies) {\r\n        const sunLongitude = NOAACalculator.getSunGeometricMeanLongitude(julianCenturies);\r\n        const center = NOAACalculator.getSunEquationOfCenter(julianCenturies);\r\n        return sunLongitude + center; // in degrees\r\n    }\r\n    // /**\r\n    // * Returns the <a href=\"http://en.wikipedia.org/wiki/True_anomaly\">true anamoly</a> of the sun.\r\n    // *\r\n    // * @param julianCenturies\r\n    // * the number of Julian centuries since J2000.0\r\n    // * @return the sun's true anamoly in degrees\r\n    // */\r\n    // private static double getSunTrueAnomaly(double julianCenturies) {\r\n    // double meanAnomaly = getSunGeometricMeanAnomaly(julianCenturies);\r\n    // double equationOfCenter = getSunEquationOfCenter(julianCenturies);\r\n    //\r\n    // return meanAnomaly + equationOfCenter; // in degrees\r\n    // }\r\n    /**\r\n     * Return the apparent longitude of the sun\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return sun's apparent longitude in degrees\r\n     */\r\n    static getSunApparentLongitude(julianCenturies) {\r\n        const sunTrueLongitude = NOAACalculator.getSunTrueLongitude(julianCenturies);\r\n        const omega = 125.04 - 1934.136 * julianCenturies;\r\n        const lambda = sunTrueLongitude - 0.00569 - 0.00478 * Math.sin(MathUtils.degreesToRadians(omega));\r\n        return lambda; // in degrees\r\n    }\r\n    /**\r\n     * Returns the mean <a href=\"http://en.wikipedia.org/wiki/Axial_tilt\">obliquity of the ecliptic</a> (Axial tilt).\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the mean obliquity in degrees\r\n     */\r\n    static getMeanObliquityOfEcliptic(julianCenturies) {\r\n        const seconds = 21.448 - julianCenturies\r\n            * (46.8150 + julianCenturies * (0.00059 - julianCenturies * (0.001813)));\r\n        return 23 + (26 + (seconds / 60)) / 60; // in degrees\r\n    }\r\n    /**\r\n     * Returns the corrected <a href=\"http://en.wikipedia.org/wiki/Axial_tilt\">obliquity of the ecliptic</a> (Axial\r\n     * tilt).\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return the corrected obliquity in degrees\r\n     */\r\n    static getObliquityCorrection(julianCenturies) {\r\n        const obliquityOfEcliptic = NOAACalculator.getMeanObliquityOfEcliptic(julianCenturies);\r\n        const omega = 125.04 - 1934.136 * julianCenturies;\r\n        return obliquityOfEcliptic + 0.00256 * Math.cos(MathUtils.degreesToRadians(omega)); // in degrees\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Declination\">declination</a> of the sun.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return\r\n     *            the sun's declination in degrees\r\n     */\r\n    static getSunDeclination(julianCenturies) {\r\n        const obliquityCorrection = NOAACalculator.getObliquityCorrection(julianCenturies);\r\n        const lambda = NOAACalculator.getSunApparentLongitude(julianCenturies);\r\n        const sint = Math.sin(MathUtils.degreesToRadians(obliquityCorrection)) * Math.sin(MathUtils.degreesToRadians(lambda));\r\n        const theta = MathUtils.radiansToDegrees(Math.asin(sint));\r\n        return theta; // in degrees\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Equation_of_time\">Equation of Time</a> - the difference between\r\n     * true solar time and mean solar time\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @return equation of time in minutes of time\r\n     */\r\n    static getEquationOfTime(julianCenturies) {\r\n        const epsilon = NOAACalculator.getObliquityCorrection(julianCenturies);\r\n        const geomMeanLongSun = NOAACalculator.getSunGeometricMeanLongitude(julianCenturies);\r\n        const eccentricityEarthOrbit = NOAACalculator.getEarthOrbitEccentricity(julianCenturies);\r\n        const geomMeanAnomalySun = NOAACalculator.getSunGeometricMeanAnomaly(julianCenturies);\r\n        let y = Math.tan(MathUtils.degreesToRadians(epsilon) / 2);\r\n        y *= y;\r\n        const sin2l0 = Math.sin(2 * MathUtils.degreesToRadians(geomMeanLongSun));\r\n        const sinm = Math.sin(MathUtils.degreesToRadians(geomMeanAnomalySun));\r\n        const cos2l0 = Math.cos(2 * MathUtils.degreesToRadians(geomMeanLongSun));\r\n        const sin4l0 = Math.sin(4 * MathUtils.degreesToRadians(geomMeanLongSun));\r\n        const sin2m = Math.sin(2 * MathUtils.degreesToRadians(geomMeanAnomalySun));\r\n        const equationOfTime = y * sin2l0 - 2 * eccentricityEarthOrbit * sinm + 4 * eccentricityEarthOrbit * y\r\n            * sinm * cos2l0 - 0.5 * y * y * sin4l0 - 1.25 * eccentricityEarthOrbit * eccentricityEarthOrbit * sin2m;\r\n        return MathUtils.radiansToDegrees(equationOfTime) * 4; // in minutes of time\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Hour_angle\">hour angle</a> of the sun at sunrise for the\r\n     * latitude.\r\n     *\r\n     * @param lat\r\n     *            , the latitude of observer in degrees\r\n     * @param solarDec\r\n     *            the declination angle of sun in degrees\r\n     * @param zenith\r\n     *            the zenith\r\n     * @return hour angle of sunrise in radians\r\n     */\r\n    static getSunHourAngleAtSunrise(lat, solarDec, zenith) {\r\n        const latRad = MathUtils.degreesToRadians(lat);\r\n        const sdRad = MathUtils.degreesToRadians(solarDec);\r\n        return (Math.acos(Math.cos(MathUtils.degreesToRadians(zenith)) / (Math.cos(latRad) * Math.cos(sdRad))\r\n            - Math.tan(latRad) * Math.tan(sdRad))); // in radians\r\n    }\r\n    /**\r\n     * Returns the <a href=\"http://en.wikipedia.org/wiki/Hour_angle\">hour angle</a> of the sun at sunset for the\r\n     * latitude. TODO: use - {@link #getSunHourAngleAtSunrise(double, double, double)} implementation to avoid\r\n     * duplication of code.\r\n     *\r\n     * @param lat\r\n     *            the latitude of observer in degrees\r\n     * @param solarDec\r\n     *            the declination angle of sun in degrees\r\n     * @param zenith\r\n     *            the zenith\r\n     * @return the hour angle of sunset in radians\r\n     */\r\n    static getSunHourAngleAtSunset(lat, solarDec, zenith) {\r\n        const latRad = MathUtils.degreesToRadians(lat);\r\n        const sdRad = MathUtils.degreesToRadians(solarDec);\r\n        const hourAngle = (Math.acos(Math.cos(MathUtils.degreesToRadians(zenith)) / (Math.cos(latRad) * Math.cos(sdRad))\r\n            - Math.tan(latRad) * Math.tan(sdRad)));\r\n        return -hourAngle; // in radians\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Celestial_coordinate_system\">Solar Elevation</a> for the\r\n     * horizontal coordinate system at the given location at the given time. Can be negative if the sun is below the\r\n     * horizon. Not corrected for altitude.\r\n     *\r\n     * @param cal\r\n     *            time of calculation\r\n     * @param lat\r\n     *            latitude of location for calculation\r\n     * @param lon\r\n     *            longitude of location for calculation\r\n     * @return solar elevation in degrees - horizon is 0 degrees, civil twilight is -6 degrees\r\n     */\r\n    static getSolarElevation(date, lat, lon) {\r\n        const julianDay = NOAACalculator.getJulianDay(date);\r\n        const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\r\n        const equationOfTime = NOAACalculator.getEquationOfTime(julianCenturies);\r\n        let longitude = (date.hour + 12) + (date.minute + equationOfTime + date.second / 60) / 60;\r\n        longitude = -(longitude * 360 / 24) % 360;\r\n        const hourAngleRad = MathUtils.degreesToRadians(lon - longitude);\r\n        const declination = NOAACalculator.getSunDeclination(julianCenturies);\r\n        const decRad = MathUtils.degreesToRadians(declination);\r\n        const latRad = MathUtils.degreesToRadians(lat);\r\n        return MathUtils.radiansToDegrees(Math.asin((Math.sin(latRad) * Math.sin(decRad))\r\n            + (Math.cos(latRad) * Math.cos(decRad) * Math.cos(hourAngleRad))));\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Celestial_coordinate_system\">Solar Azimuth</a> for the\r\n     * horizontal coordinate system at the given location at the given time. Not corrected for altitude. True south is 0\r\n     * degrees.\r\n     *\r\n     * @param cal\r\n     *            time of calculation\r\n     * @param latitude\r\n     *            latitude of location for calculation\r\n     * @param lon\r\n     *            longitude of location for calculation\r\n     * @return FIXME\r\n     */\r\n    static getSolarAzimuth(date, latitude, lon) {\r\n        const julianDay = NOAACalculator.getJulianDay(date);\r\n        const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\r\n        const equationOfTime = NOAACalculator.getEquationOfTime(julianCenturies);\r\n        let longitude = (date.hour + 12) + (date.minute + equationOfTime + date.second / 60) / 60;\r\n        longitude = -(longitude * 360 / 24) % 360;\r\n        const hourAngleRad = MathUtils.degreesToRadians(lon - longitude);\r\n        const declination = NOAACalculator.getSunDeclination(julianCenturies);\r\n        const decRad = MathUtils.degreesToRadians(declination);\r\n        const latRad = MathUtils.degreesToRadians(latitude);\r\n        return MathUtils.radiansToDegrees(Math.atan(Math.sin(hourAngleRad)\r\n            / ((Math.cos(hourAngleRad) * Math.sin(latRad)) - (Math.tan(decRad) * Math.cos(latRad))))) + 180;\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n     * of sunrise for the given day at the given location on earth\r\n     *\r\n     * @param julianDay\r\n     *            the Julian day\r\n     * @param latitude\r\n     *            the latitude of observer in degrees\r\n     * @param longitude\r\n     *            the longitude of observer in degrees\r\n     * @param zenith\r\n     *            the zenith\r\n     * @return the time in minutes from zero UTC\r\n     */\r\n    static getSunriseUTC(julianDay, latitude, longitude, zenith) {\r\n        const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\r\n        // Find the time of solar noon at the location, and use that declination. This is better than start of the\r\n        // Julian day\r\n        const noonmin = NOAACalculator.getSolarNoonUTC(julianCenturies, longitude);\r\n        const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay + noonmin / 1440);\r\n        // First pass to approximate sunrise (using solar noon)\r\n        let eqTime = NOAACalculator.getEquationOfTime(tnoon);\r\n        let solarDec = NOAACalculator.getSunDeclination(tnoon);\r\n        let hourAngle = NOAACalculator.getSunHourAngleAtSunrise(latitude, solarDec, zenith);\r\n        let delta = longitude - MathUtils.radiansToDegrees(hourAngle);\r\n        let timeDiff = 4 * delta; // in minutes of time\r\n        let timeUTC = 720 + timeDiff - eqTime; // in minutes\r\n        // Second pass includes fractional Julian Day in gamma calc\r\n        const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + timeUTC / 1440);\r\n        eqTime = NOAACalculator.getEquationOfTime(newt);\r\n        solarDec = NOAACalculator.getSunDeclination(newt);\r\n        hourAngle = NOAACalculator.getSunHourAngleAtSunrise(latitude, solarDec, zenith);\r\n        delta = longitude - MathUtils.radiansToDegrees(hourAngle);\r\n        timeDiff = 4 * delta;\r\n        timeUTC = 720 + timeDiff - eqTime; // in minutes\r\n        return timeUTC;\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n     * of <a href=\"http://en.wikipedia.org/wiki/Noon#Solar_noon\">solar noon</a> for the given day at the given location\r\n     * on earth.\r\n     *\r\n     * @param julianCenturies\r\n     *            the number of Julian centuries since J2000.0\r\n     * @param longitude\r\n     *            the longitude of observer in degrees\r\n     * @return the time in minutes from zero UTC\r\n     */\r\n    static getSolarNoonUTC(julianCenturies, longitude) {\r\n        // First pass uses approximate solar noon to calculate eqtime\r\n        const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + longitude / 360);\r\n        let eqTime = NOAACalculator.getEquationOfTime(tnoon);\r\n        const solNoonUTC = 720 + (longitude * 4) - eqTime; // min\r\n        const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) - 0.5 + solNoonUTC / 1440);\r\n        eqTime = NOAACalculator.getEquationOfTime(newt);\r\n        return 720 + (longitude * 4) - eqTime; // min\r\n    }\r\n    /**\r\n     * Return the <a href=\"http://en.wikipedia.org/wiki/Universal_Coordinated_Time\">Universal Coordinated Time</a> (UTC)\r\n     * of sunset for the given day at the given location on earth\r\n     *\r\n     * @param julianDay\r\n     *            the Julian day\r\n     * @param latitude\r\n     *            the latitude of observer in degrees\r\n     * @param longitude\r\n     *            : longitude of observer in degrees\r\n     * @param zenith\r\n     *            the zenith\r\n     * @return the time in minutes from zero Universal Coordinated Time (UTC)\r\n     */\r\n    static getSunsetUTC(julianDay, latitude, longitude, zenith) {\r\n        const julianCenturies = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay);\r\n        // Find the time of solar noon at the location, and use that declination. This is better than start of the\r\n        // Julian day\r\n        const noonmin = NOAACalculator.getSolarNoonUTC(julianCenturies, longitude);\r\n        const tnoon = NOAACalculator.getJulianCenturiesFromJulianDay(julianDay + noonmin / 1440);\r\n        // First calculates sunrise and approx length of day\r\n        let eqTime = NOAACalculator.getEquationOfTime(tnoon);\r\n        let solarDec = NOAACalculator.getSunDeclination(tnoon);\r\n        let hourAngle = NOAACalculator.getSunHourAngleAtSunset(latitude, solarDec, zenith);\r\n        let delta = longitude - MathUtils.radiansToDegrees(hourAngle);\r\n        let timeDiff = 4 * delta;\r\n        let timeUTC = 720 + timeDiff - eqTime;\r\n        // Second pass includes fractional Julian Day in gamma calc\r\n        const newt = NOAACalculator.getJulianCenturiesFromJulianDay(NOAACalculator.getJulianDayFromJulianCenturies(julianCenturies) + timeUTC / 1440);\r\n        eqTime = NOAACalculator.getEquationOfTime(newt);\r\n        solarDec = NOAACalculator.getSunDeclination(newt);\r\n        hourAngle = NOAACalculator.getSunHourAngleAtSunset(latitude, solarDec, zenith);\r\n        delta = longitude - MathUtils.radiansToDegrees(hourAngle);\r\n        timeDiff = 4 * delta;\r\n        timeUTC = 720 + timeDiff - eqTime; // in minutes\r\n        return timeUTC;\r\n    }\r\n}\r\n/**\r\n * The <a href=\"http://en.wikipedia.org/wiki/Julian_day\">Julian day</a> of January 1, 2000\r\n */\r\nNOAACalculator.JULIAN_DAY_JAN_1_2000 = 2451545;\r\n/**\r\n * Julian days per century\r\n */\r\nNOAACalculator.JULIAN_DAYS_PER_CENTURY = 36525;\r\n//# sourceMappingURL=NOAACalculator.js.map"]},"metadata":{},"sourceType":"module"}